<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Level 3 — 彩色（暖色调）</title>
    <link rel="stylesheet" href="./style.css">
  </head>
  <body>
    <main class="container">
      <h1>Level 3 — 彩色（暖色调）</h1>
      <p>Prototype page. Click "Complete Level" to drop the final key.</p>
      <canvas id="lvl3" width="320" height="176" style="image-rendering:pixelated;border:1px solid #ccc;background:#fff4e6"></canvas>
      <p>
        Placeholder for the warm-color final level.
      </p>
      <button id="complete">Complete Level (drop code)</button>
      <a href="index.html">Back to main</a>
    </main>

    <script>
      const c = document.getElementById('lvl3');
      const ctx = c.getContext('2d');
      ctx.fillStyle = '#fff4e6'; ctx.fillRect(0,0,c.width,c.height);
      ctx.fillStyle = '#8b3a2b'; ctx.fillRect(44,28,16*6,16*6);

      document.getElementById('complete').addEventListener('click', ()=>{
        if(window.SpliceMain && window.SpliceMain.reportLevelComplete){
          window.SpliceMain.reportLevelComplete(3);
        } else {
          const s = JSON.parse(localStorage.getItem('splicing_state_v1')||'{}');
          s.droppedKeys = s.droppedKeys || [];
          if(!s.droppedKeys.includes('1218')) s.droppedKeys.push('1218');
          localStorage.setItem('splicing_state_v1', JSON.stringify(s));
          alert('Dropped code: 1218');
        }
      });
    </script>
  </body>
</html>
